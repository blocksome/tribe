<!--Main App for tribe-->

<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tribe</title>

    <!--CSS Styling-->
    <!--Ionic-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css" />

    <!--Local Styling-->
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>

    <!--App to be loaded on document ready-->
    <ion-app>

    </ion-app>
    
    <!--Javascript-->
    <!--Ionic-->
    <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>

    <!--jQuery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
        integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
        crossorigin="anonymous"></script>

    <!--Local-->
    <script src="js/code.js"></script>

    <!--Import Ionic Component Script-->
    <script type="module">

        import { menuController } from 'https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/index.esm.js';
        window.menuController = menuController;

        import { modalController } from 'https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/index.esm.js';
        window.modalController = modalController;

    </script>

    <!--Hamburger Menu-->
    <script>
        async function openMenu() {
            await menuController.open();
        }

    </script>

    <!--Journal Entry Maker-->
    <script>
        customElements.define('modal-content', class ModalContent extends HTMLElement {
            connectedCallback() {
                this.innerHTML = `
          <ion-header translucent class="white-bg">
            <ion-toolbar>
              <ion-title>New Journal Entry</ion-title>
              <ion-buttons slot="end">
                <ion-icon name="close-outline" id="close-journal-btn"></ion-icon>
              </ion-buttons>
            </ion-toolbar>
          </ion-header>

          <ion-content class="white-bg">
            <ion-list>
            <ion-item>
                <ion-label position="floating">Name of Entry</ion-label>
                <ion-input clear-input required="true" id="journal-name"></ion-input>
            </ion-item>
 
            <ion-item>
                <ion-label position="floating">Details</ion-label>
                <ion-textarea rows="20" id="journal-details"></ion-textarea>
            </ion-item>

            <ion-item>
                <ion-label position="fixed">Image</ion-label>
                <ion-input clear-input type="file" accept="image/*" id="journal-image"></ion-input>
            </ion-item>

            <ion-button class="ion-padding" id="journal-submit" expand="block" slot="icon-only">Save Entry</ion-button>
            </ion-list>
          </ion-content>
        `;
            }
        });

        let currentModal = null;
        $("body").on("click", "#add-journal-btn", function(){
            createModal();
        });

        $("body").on("click", "#close-journal-btn", function(){
            dismissModal();
        });

        async function createModal() {
            const modal = await modalController.create({
                component: 'modal-content',
                cssClass: 'journal-modal-css'
            });

            await modal.present();
            currentModal = modal;
        }

        function dismissModal() {
            if (currentModal) {
                currentModal.dismiss().then(() => { currentModal = null; });
            }
        }

    </script>

</body>

</html>